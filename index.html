<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>For Thu Trang üíå</title>

<style>
  body{
    margin:0;
    height:100vh;
    display:grid;
    place-items:center;
    font-family:system-ui;
    overflow:hidden;
    background:linear-gradient(135deg,#ffe0ec,#fff);
  }

  /* n·ªÅn couple khi YES */
  body.yes-bg{
    background:
      linear-gradient(rgba(255,224,236,.55), rgba(0,0,0,.15)),
      url("couple.jpg");
    background-size:cover;
    background-position:center;
    background-repeat:no-repeat;
  }

  /* card n·ªÅn dogcat */
  .card{
    width:min(520px,95vw);
    padding:26px;
    border-radius:28px;
    text-align:center;
    box-shadow:0 18px 45px rgba(0,0,0,.18);

    background:
      linear-gradient(rgba(255,255,255,.55),rgba(255,255,255,.55)),
      url("dogcat.jpg");
    background-size:cover;
    background-position:center;
    background-repeat:no-repeat;

    transition: opacity .25s ease, transform .25s ease;
    position:relative;
    z-index:2;
  }

  .card.hidden{
    opacity:0;
    transform: scale(.98);
    pointer-events:none;
  }

  h2{
    color:#ff3b7b;
    font-weight:900;
    font-size:22px;
    margin:0 0 16px;
    text-shadow:0 3px 18px rgba(255,255,255,.9);
  }

  /* n√∫t */
  button{
    padding:15px 30px;
    border:none;
    border-radius:999px;
    font-size:18px;
    cursor:pointer;
    user-select:none;
    touch-action: manipulation;
    transition: transform .25s ease, left .25s ease, top .25s ease;
  }

  /* YES v·∫´n ‚Äúƒë·ª©ng chung‚Äù khu v·ª±c card l√∫c ƒë·∫ßu */
  #yes{
    background:#ff3b7b;
    color:white;
    position:relative;
    transform:scale(1);
    z-index:9998;
  }

  /* NO: fixed ƒë·ªÉ ch·∫°y kh·∫Øp m√†n h√¨nh */
  #no{
    background:#eee;
    position:fixed;
    left:60%;
    top:62%;
    z-index:9999;
  }

  /* layout n√∫t trong card */
  .btn-row{
    display:flex;
    justify-content:center;
    gap:18px;
    margin-top:12px;
  }

  /* Khung ch·ªØ sau khi YES */
  .love-box{
    position:fixed;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    width:min(520px,92vw);
    padding:18px 18px;
    border-radius:22px;
    background:rgba(255,255,255,.78);
    backdrop-filter: blur(10px);
    box-shadow:0 18px 45px rgba(0,0,0,.18);
    text-align:center;
    z-index:10;
    display:none;
  }
  .love-box.show{ display:block; }

  .love-text{
    margin:0;
    color:#ff3b7b;
    font-weight:900;
    font-size:20px;
    line-height:1.35;
    text-shadow:0 2px 14px rgba(255,255,255,.9);
  }

  /* Hearts */
  .hearts{
    position:fixed;
    inset:0;
    pointer-events:none;
    overflow:hidden;
    z-index:9;
  }

  .heart{
    position:absolute;
    bottom:-30px;
    animation: float 2.2s ease forwards;
    filter: drop-shadow(0 10px 14px rgba(0,0,0,.12));
    opacity:.95;
  }

  @keyframes float{
    0%   { transform: translateY(0) scale(.8); opacity:0; }
    10%  { opacity:1; }
    100% { transform: translateY(-420px) scale(1.55); opacity:0; }
  }
</style>
</head>

<body>
<div class="hearts" id="hearts"></div>

<div class="love-box" id="loveBox">
  <p class="love-text">Ba bi·∫øt m√†aa, ba y√™u Thu Trang nhi·ªÅu l·∫Ømmm ü¶¶</p>
</div>

<div class="card" id="card">
  <h2>Thu Trang ∆°i, do you be my valentine? üíåü´ß</h2>

  <div class="btn-row">
    <button id="yes">Yes</button>
    <button id="no">No</button>
  </div>
</div>

<script>
  const yesBtn = document.getElementById("yes");
  const noBtn  = document.getElementById("no");
  const hearts = document.getElementById("hearts");
  const loveBox = document.getElementById("loveBox");
  const card = document.getElementById("card");

  let noCount = 0;
  let heartTimer = null;
  let finalScale = null;

  function rand(min,max){ return Math.floor(Math.random()*(max-min)+min); }

  // NO ch·∫°y kh·∫Øp m√†n h√¨nh (to√†n viewport)
  function moveNoAnywhere(){
    const pad = 8; // s√°t g√≥c v·∫´n ƒë∆∞·ª£c nh∆∞ng ch·ª´a ch√∫t ƒë·ªÉ kh√¥ng d√≠nh tai m√†n h√¨nh
    const b = noBtn.getBoundingClientRect();
    const maxX = Math.max(pad, window.innerWidth - b.width - pad);
    const maxY = Math.max(pad, window.innerHeight - b.height - pad);

    const x = rand(pad, maxX);
    const y = rand(pad, maxY);

    noBtn.style.left = x + "px";
    noBtn.style.top  = y + "px";
  }

  function computeFinalScale(){
    // scale ƒë·ªÉ YES g·∫ßn ‚Äúfull width‚Äù tr√™n m·ªçi m√°y
    const r = yesBtn.getBoundingClientRect();
    const baseW = r.width;
    // chi·∫øm ~92% chi·ªÅu ngang
    const targetW = window.innerWidth * 0.92;
    let s = targetW / baseW;
    // ch·∫∑n ƒë·ªÉ kh√¥ng qu√° ƒëi√™n tr√™n m√†n h√¨nh c·ª±c l·ªõn
    s = Math.min(Math.max(s, 1), 12);
    return s;
  }

  function spawnHeart(){
    const icons = ["üíó","üíñ","‚ù§Ô∏è","ü´ß"];
    const h = document.createElement("div");
    h.className = "heart";
    h.textContent = icons[rand(0, icons.length)];
    h.style.left = rand(0, window.innerWidth) + "px";
    h.style.fontSize = rand(18, 36) + "px";
    h.style.animationDuration = (1.8 + Math.random()*1.1).toFixed(2) + "s";
    hearts.appendChild(h);
    h.addEventListener("animationend", ()=> h.remove());
  }

  function startHeartsForever(){
    if (heartTimer) return;
    heartTimer = setInterval(() => {
      spawnHeart();
      if (Math.random() > 0.45) spawnHeart();
    }, 180);
  }

  // NO: ch·∫°y + YES to d·∫ßn, 15 l·∫ßn m·ªõi g·∫ßn full
  noBtn.addEventListener("pointerdown",(e)=>{
    e.preventDefault();
    moveNoAnywhere();

    noCount++;
    if (!finalScale) finalScale = computeFinalScale();

    const t = Math.min(noCount / 15, 1); // 0 ‚Üí 1
    const scale = 1 + t * (finalScale - 1);

    // khi b·∫Øt ƒë·∫ßu ph√¨nh l·ªõn th√¨ cho YES fixed & center cho ‚Äúƒë√£‚Äù
    if (t > 0.55){
      yesBtn.style.position = "fixed";
      yesBtn.style.left = "50%";
      yesBtn.style.top  = "60%";
      yesBtn.style.transform = `translate(-50%,-50%) scale(${scale})`;
      yesBtn.style.zIndex = 9998;
    } else {
      yesBtn.style.transform = `scale(${scale})`;
    }

    // ƒë·∫øn ng∆∞·ª°ng 15 l·∫ßn: gi·ªØ c·ªë ƒë·ªãnh center
    if (t === 1){
      yesBtn.style.position = "fixed";
      yesBtn.style.left = "50%";
      yesBtn.style.top  = "60%";
      yesBtn.style.transform = `translate(-50%,-50%) scale(${finalScale})`;
    }
  });

  // YES: ch·ªâ c√≤n n·ªÅn couple + khung ch·ªØ + tim bay li√™n t·ª•c
  yesBtn.addEventListener("click", ()=>{
    document.body.classList.add("yes-bg");
    loveBox.classList.add("show");
    card.classList.add("hidden");

    // ·∫©n NO lu√¥n
    noBtn.style.display = "none";
    // ·∫©n YES lu√¥n (v√¨ gi·ªù ch·ªâ c√≤n background + ch·ªØ + hearts)
    yesBtn.style.display = "none";

    startHeartsForever();
  });

  // cho NO nh·∫£y 1 ph√°t l√∫c load (ƒë·ª° ƒë·ª©ng y√™n)
  window.addEventListener("load", () => moveNoAnywhere());
  window.addEventListener("resize", () => { finalScale = null; });
</script>
</body>
</html>
